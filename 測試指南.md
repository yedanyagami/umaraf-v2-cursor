# 🧪 UMARAF v2 Cursor 擴展測試指南

## 🚀 快速開始

### 方法 1: 使用 F5 調試（推薦）

1. **在 Cursor 中打開項目**
   ```bash
   cd C:\Users\rovin22\Desktop\code\umaraf-cursor-extension
   cursor .
   ```

2. **按 F5 啟動調試**
   - Cursor 會自動打開一個新的擴展開發窗口
   - 在新窗口中測試所有功能

3. **查看輸出**
   - 按 `Ctrl + Shift + U` 打開輸出面板
   - 選擇 "UMARAF v2" 通道

### 方法 2: 打包安裝（生產環境測試）

1. **安裝 vsce**
   ```bash
   npm install -g @vscode/vsce
   ```

2. **打包擴展**
   ```bash
   npm run package
   vsce package
   ```

3. **安裝 VSIX**
   ```bash
   code --install-extension umaraf-v2-cursor-2.0.0.vsix
   ```

## 🧪 測試清單

### ✅ 基礎測試

- [ ] **擴展啟動**
  - 打開 Cursor
  - 查看輸出面板是否有 "UMARAF v2 已啟動"
  - 確認沒有錯誤訊息

- [ ] **歡迎訊息**
  - 確認右下角彈出歡迎訊息
  - 測試"打開工作流程編輯器"按鈕
  - 測試"查看文檔"按鈕

### ✅ Code Lens 測試

1. **創建測試文件**
   ```javascript
   // test.js
   function testFunction() {
       console.log('Hello World');
   }
   
   const arrow = () => {
       return 'Arrow function';
   };
   ```

2. **預期結果**
   - 在函數定義上方看到 4 個按鈕：
     - 🤖 AI 優化
     - 📝 生成文檔
     - 🧪 生成測試
     - 🔍 安全審查

3. **測試操作**
   - [ ] 點擊每個按鈕
   - [ ] 檢查輸出面板的訊息
   - [ ] 確認功能被正確調用

### ✅ Hover Provider 測試

1. **懸停測試**
   ```javascript
   const userName = "YEDAN";
   ```

2. **預期結果**
   - 懸停在 `userName` 上
   - 看到 AI 分析面板
   - 包含：類型推斷、用途說明、優化建議

3. **測試項目**
   - [ ] 懸停在變數上
   - [ ] 懸停在函數名上
   - [ ] 懸停在字符串上
   - [ ] 檢查快取功能（重複懸停）

### ✅ 工作流程編輯器測試

1. **打開編輯器**
   - 命令面板 (`Ctrl+Shift+P`)
   - 輸入 "UMARAF: 打開工作流程編輯器"

2. **測試功能**
   - [ ] 添加 AutoGen Agent
   - [ ] 添加 LangGraph Agent
   - [ ] 添加 CrewAI Agent
   - [ ] 添加 Swarm Agent
   - [ ] 拖動 Agent 節點
   - [ ] 點擊"執行工作流程"按鈕
   - [ ] 檢查狀態欄更新
   - [ ] 測試"清空"按鈕

3. **預期結果**
   - Agent 節點可拖動
   - 懸停時有高亮效果
   - 執行時狀態正確更新
   - 輸出面板顯示執行日誌

### ✅ 命令測試

測試所有命令是否可用：

```
Ctrl+Shift+P 打開命令面板，搜索 "UMARAF"
```

- [ ] `UMARAF: AI 優化函數`
- [ ] `UMARAF: 生成文檔`
- [ ] `UMARAF: 生成測試`
- [ ] `UMARAF: 安全審查`
- [ ] `UMARAF: 打開工作流程編輯器`
- [ ] `UMARAF: 效能測試`
- [ ] `UMARAF: Frida 逆向分析` (如果啟用)

### ✅ 配置測試

1. **打開設定**
   ```
   File > Preferences > Settings
   搜索 "UMARAF"
   ```

2. **測試配置項**
   - [ ] 切換 `enableCodeLens`
   - [ ] 切換 `enableHoverProvider`
   - [ ] 更改 `defaultAgent`
   - [ ] 修改 `apiEndpoint`
   - [ ] 切換 `enableFrida`

3. **驗證效果**
   - 關閉 Code Lens 後，按鈕應消失
   - 重新啟用後，按鈕應恢復

### ✅ 效能測試

1. **運行 Benchmark**
   - 命令面板 → "UMARAF: 效能測試"

2. **檢查項目**
   - [ ] 進度通知顯示
   - [ ] 測試按順序執行
   - [ ] 輸出面板顯示結果
   - [ ] 響應時間合理（< 1s）

### ✅ Frida 整合測試（可選）

如果啟用了 Frida：

1. **設定**
   ```json
   {
     "umaraf.enableFrida": true
   }
   ```

2. **測試分析**
   - [ ] 命令面板 → "UMARAF: Frida 逆向分析"
   - [ ] 輸入目標路徑
   - [ ] 檢查終端輸出
   - [ ] 檢查分析面板

## 🐛 常見問題排查

### 擴展未啟動

1. 檢查輸出面板是否有錯誤
2. 查看開發者工具 (`Help > Toggle Developer Tools`)
3. 檢查 `dist/extension.js` 是否存在

### Code Lens 未顯示

1. 檢查配置 `umaraf.enableCodeLens` 是否為 `true`
2. 確認文件類型支援（JavaScript, Python, Java 等）
3. 嘗試重新加載窗口 (`Ctrl+R`)

### Hover 無反應

1. 檢查 `umaraf.enableHoverProvider` 配置
2. 等待快取生成（首次較慢）
3. 檢查是否懸停在正確的符號上

### 工作流程編輯器空白

1. 檢查 Webview 是否啟用
2. 查看開發者工具的 Console
3. 嘗試關閉並重新打開

## 📊 測試報告模板

```markdown
## 測試日期: [日期]
## 測試者: [姓名]
## Cursor 版本: [版本號]

### 測試結果

- [ ] 基礎功能: ✅ / ❌
- [ ] Code Lens: ✅ / ❌
- [ ] Hover Provider: ✅ / ❌
- [ ] 工作流程編輯器: ✅ / ❌
- [ ] 命令功能: ✅ / ❌
- [ ] 配置選項: ✅ / ❌
- [ ] 效能測試: ✅ / ❌

### 發現的問題

1. [問題描述]
2. [問題描述]

### 建議改進

1. [改進建議]
2. [改進建議]
```

## 🔄 自動化測試（進階）

### 單元測試

```bash
npm test
```

### 持續集成

項目已配置 GitHub Actions，每次推送時自動運行測試。

## 📝 提交 Issue

如果發現問題，請在 GitHub 提交 Issue：

https://github.com/yedanyagami/umaraf-v2-cursor/issues

包含以下信息：
- 問題描述
- 重現步驟
- 預期行為
- 實際行為
- 截圖或日誌
- 環境信息（OS、Cursor 版本等）

---

## 🎉 測試完成

完成所有測試後，如果一切正常：

1. ⭐ 在 GitHub 給項目加星
2. 📢 分享給其他開發者
3. 💬 提供反饋和建議
4. 🤝 考慮貢獻代碼

**祝測試順利！** 🚀

